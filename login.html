<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Felina Technology — Login</title>
    <style>
        :root{--bg:#f6f7fb;--card:#fff;--accent:#6c63ff;--muted:#6b7280}
        body{font-family:Inter,Segoe UI,system-ui,Arial;background:var(--bg);margin:0;color:#111}
        .container{max-width:1100px;margin:32px auto;padding:20px}
        header{display:flex;align-items:center;gap:16px}
        .logo{font-weight:700;color:var(--accent);font-size:20px}
        .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px;margin-top:18px}
        .card{background:var(--card);padding:18px;border-radius:10px;box-shadow:0 6px 18px rgba(18,23,40,0.06)}
        h1{margin:0;font-size:18px}
        p.small{color:var(--muted);margin:8px 0 12px;font-size:13px}
        .muted{color:var(--muted);font-size:13px}
        label{display:block;font-size:13px;margin-bottom:6px}
        input[type="text"],input[type="password"],select{width:100%;padding:10px;border:1px solid #e6e8f0;border-radius:8px;font-size:14px;box-sizing:border-box}
        button{background:var(--accent);color:#fff;border:0;padding:10px 12px;border-radius:8px;cursor:pointer}
        .btn-ghost{background:transparent;color:var(--accent);border:1px solid #e6e8ff}
        .row{display:flex;gap:8px;align-items:center}
        .link-output{word-break:break-all;background:#f3f4f6;padding:10px;border-radius:8px;border:1px dashed #e8eaf6}
        footer{margin-top:18px;color:var(--muted);font-size:13px}
        .status-dot{display:inline-block;width:10px;height:10px;border-radius:50%;margin-right:8px;vertical-align:middle}
        .online{background:#16a34a}
        .offline{background:#ef4444}
        
        /* Login styles */
        .login-container{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,var(--accent) 0%,#8b84ff 100%)}
        .login-card{background:var(--card);padding:40px;border-radius:12px;box-shadow:0 20px 60px rgba(18,23,40,0.15);width:100%;max-width:380px}
        .login-card h1{font-size:24px;margin-bottom:8px;color:#111}
        .login-card .subtitle{color:var(--muted);margin-bottom:24px;font-size:14px}
        .login-form label{margin-top:16px}
        .login-form input{margin-bottom:12px}
        .login-form button{width:100%;margin-top:12px;padding:12px}
        .login-error{color:#ef4444;font-size:12px;margin-top:8px;display:none}
        .dashboard-view{display:none}
        
        .login-view button:hover{opacity:0.9}
    </style>
</head>
<body>
    <!-- LOGIN VIEW -->
    <div id="loginView" class="login-view">
        <div class="login-container">
            <div class="login-card">
                <h1>Felina Technology</h1>
                <p class="subtitle">Secure Dashboard Access</p>
                
                <form id="loginForm" class="login-form" onsubmit="handleLogin(event)">
                    <label for="email">Email Address</label>
                    <input id="email" type="text" placeholder="you@felinatechnology.com" required />

                    <label for="password">Password</label>
                    <input id="password" type="password" placeholder="Enter your password" required />

                    <button type="submit">Sign In</button>
                    
                    <div id="loginError" class="login-error"></div>
                </form>

                <p class="muted" style="margin-top:20px;text-align:center;font-size:12px">
                    Demo credentials:<br/>
                    Email: <strong>admin@felinatechnology.com</strong><br/>
                    Password: <strong>felina123</strong>
                </p>
            </div>
        </div>
    </div>

    <!-- DASHBOARD VIEW -->
    <div id="dashboardView" class="dashboard-view">
        <div class="container">
            <header>
                <div class="logo">Felina Technology</div>
                <div style="margin-left:auto" class="muted">Dashboard — quick publish & share</div>
                <button id="logoutBtn" class="btn-ghost" style="margin-left:16px">Logout</button>
            </header>

            <div class="grid">
                <div class="card">
                    <h1>Site status</h1>
                    <p class="small">Shows whether this instance is reachable from the network and gives quick publish notes.</p>
                    <div id="statusRow" class="row" style="margin-top:6px">
                        <span id="statusDot" class="status-dot offline" aria-hidden="true"></span>
                        <strong id="statusText">Local (not publicly accessible)</strong>
                    </div>
                    <p class="muted" style="margin-top:12px">To make the site accessible on the public internet:
                    deploy to a hosting provider and point DNS for <code>www.felinatechnology.com</code> to that host. Enable HTTPS.</p>
                </div>

                <div class="card">
                    <h1>Generate shareable link</h1>
                    <p class="small">Create a short share link to include in emails or messages. Choose the domain that should be used in the link.</p>

                    <label for="domainInput">Domain (use your public domain)</label>
                    <input id="domainInput" type="text" value="https://www.felinatechnology.com" />

                    <label style="margin-top:8px">Path or page</label>
                    <input id="pathInput" type="text" value="/" />

                    <div style="margin-top:12px" class="row">
                        <button id="generateBtn">Generate link</button>
                        <button id="copyBtn" class="btn-ghost" type="button">Copy</button>
                        <button id="emailBtn" class="btn-ghost" type="button">Email</button>
                    </div>

                    <div style="margin-top:12px">
                        <div id="linkOutput" class="link-output">No link yet — click Generate link</div>
                    </div>
                </div>

                <div class="card">
                    <h1>Options & token</h1>
                    <p class="small">Optionally include a simple token for tracking or one-time access. Tokens are generated client-side here — implement server-side tokens for production.</p>
                    <label>Token type</label>
                    <select id="tokenType">
                        <option value="none">None</option>
                        <option value="random">Random short token</option>
                        <option value="timestamp">Timestamp token</option>
                    </select>

                    <label style="margin-top:10px">Expire (hours, optional)</label>
                    <input id="expireInput" type="text" placeholder="e.g. 24" />

                    <div style="margin-top:12px" class="muted">Note: For secure share links with expiration or single-use behavior, implement server-side storage and verification.</div>
                </div>

                <div class="card">
                    <h1>Quick actions</h1>
                    <p class="small">Utilities to test reachability and to copy or email the generated URL.</p>
                    <div style="margin-top:10px" class="row">
                        <button id="checkPublic">Check Public Reachability</button>
                        <button id="resetBtn" class="btn-ghost">Reset</button>
                    </div>
                    <div style="margin-top:12px" class="muted">When you click "Email" the default mail client opens with a prefilled subject and body so you can send from your company address (you must send from an @felinatechnology.com mailbox).</div>
                </div>
            </div>

            <footer>
                Last updated: <span id="lastUpdated">—</span>
            </footer>
        </div>
    </div>

    <script>
        // ============ LOGIN LOGIC ============
        function handleLogin(event) {
            event.preventDefault();
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value;
            const errorDiv = document.getElementById('loginError');

            // Demo credentials (replace with real authentication)
            const validEmail = 'admin@felinatechnology.com';
            const validPassword = 'felina123';

            if (email === validEmail && password === validPassword) {
                // Store session in localStorage
                localStorage.setItem('felinaUser', email);
                localStorage.setItem('felinaLoginTime', new Date().getTime());
                showDashboard();
                errorDiv.style.display = 'none';
            } else {
                errorDiv.textContent = 'Invalid email or password.';
                errorDiv.style.display = 'block';
            }
        }

        function showDashboard() {
            document.getElementById('loginView').style.display = 'none';
            document.getElementById('dashboardView').style.display = 'block';
            updateStatus(false);
        }

        function showLogin() {
            document.getElementById('loginView').style.display = 'block';
            document.getElementById('dashboardView').style.display = 'none';
            document.getElementById('loginForm').reset();
        }

        function logout() {
            localStorage.removeItem('felinaUser');
            localStorage.removeItem('felinaLoginTime');
            showLogin();
        }

        // Check if already logged in
        window.addEventListener('load', () => {
            const user = localStorage.getItem('felinaUser');
            if (user) {
                showDashboard();
            } else {
                showLogin();
            }
        });

        document.getElementById('logoutBtn').addEventListener('click', logout);

        // ============ DASHBOARD LOGIC ============
        const statusDot = document.getElementById('statusDot');
        const statusText = document.getElementById('statusText');
        const lastUpdated = document.getElementById('lastUpdated');
        const domainInput = document.getElementById('domainInput');
        const pathInput = document.getElementById('pathInput');
        const tokenType = document.getElementById('tokenType');
        const expireInput = document.getElementById('expireInput');
        const linkOutput = document.getElementById('linkOutput');
        const generateBtn = document.getElementById('generateBtn');
        const copyBtn = document.getElementById('copyBtn');
        const emailBtn = document.getElementById('emailBtn');
        const checkPublic = document.getElementById('checkPublic');
        const resetBtn = document.getElementById('resetBtn');

        function updateStatus(online) {
            if (online) {
                statusDot.classList.remove('offline');
                statusDot.classList.add('online');
                statusText.textContent = 'Online (publicly reachable)';
            } else {
                statusDot.classList.remove('online');
                statusDot.classList.add('offline');
                statusText.textContent = 'Local (not publicly accessible)';
            }
            lastUpdated.textContent = new Date().toLocaleString();
        }

        async function checkReachability() {
            const d = domainInput.value.trim();
            if (!d) return alert('Set the domain to check.');
            try {
                const probe = new URL(d);
                const probeUrl = probe.origin + '/?healthcheck=1';
                const controller = new AbortController();
                const id = setTimeout(() => controller.abort(), 3500);
                await fetch(probeUrl, { method: 'HEAD', mode: 'no-cors', signal: controller.signal });
                clearTimeout(id);
                updateStatus(true);
                alert('Domain appears reachable (quick check).');
            } catch (err) {
                updateStatus(false);
                alert('Domain not reachable from this browser environment. Deploy and ensure DNS + firewall allow public requests.');
            }
        }

        function makeToken() {
            const t = tokenType.value;
            if (t === 'none') return '';
            if (t === 'timestamp') return Date.now().toString(36);
            return Math.random().toString(36).slice(2, 10);
        }

        function buildLink() {
            const domain = domainInput.value.trim();
            if (!domain) return '';
            let path = pathInput.value.trim() || '/';
            if (!path.startsWith('/')) path = '/' + path;
            let normalized = domain;
            if (!/^https?:\/\//i.test(normalized)) normalized = 'https://' + normalized;
            const token = makeToken();
            const expire = expireInput.value.trim();
            const params = new URLSearchParams();
            if (token) params.set('t', token);
            if (expire) params.set('exp', expire);
            const query = params.toString();
            return normalized.replace(/\/$/, '') + path + (query ? '?' + query : '');
        }

        generateBtn.addEventListener('click', () => {
            const link = buildLink();
            if (!link) return alert('Please provide a valid domain (e.g. https://www.felinatechnology.com).');
            linkOutput.textContent = link;
        });

        copyBtn.addEventListener('click', async () => {
            const txt = linkOutput.textContent || '';
            if (!txt || txt.startsWith('No link')) return alert('Generate a link first.');
            try {
                await navigator.clipboard.writeText(txt);
                alert('Link copied to clipboard.');
            } catch {
                const area = document.createElement('textarea');
                area.value = txt;
                document.body.appendChild(area);
                area.select();
                document.execCommand('copy');
                area.remove();
                alert('Link copied to clipboard (fallback).');
            }
        });

        emailBtn.addEventListener('click', () => {
            const link = linkOutput.textContent || '';
            if (!link || link.startsWith('No link')) return alert('Generate a link first.');
            const recipient = 'support@felinatechnology.com';
            const subject = encodeURIComponent('Access to Felina Technology');
            const body = encodeURIComponent(
`Hello,

Please use the following link to access Felina Technology:

${link}

Note: Please send from your @felinatechnology.com address.

Regards`
            );
            location.href = `mailto:${recipient}?subject=${subject}&body=${body}`;
        });

        checkPublic.addEventListener('click', checkReachability);
        resetBtn.addEventListener('click', () => {
            domainInput.value = 'https://www.felinatechnology.com';
            pathInput.value = '/';
            tokenType.value = 'none';
            expireInput.value = '';
            linkOutput.textContent = 'No link yet — click Generate link';
        });
    </script>
</body>
</html>